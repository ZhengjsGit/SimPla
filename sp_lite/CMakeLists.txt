cmake_minimum_required(VERSION 2.8)
cmake_policy(SET CMP0015 NEW)
cmake_policy(SET CMP0028 NEW)

PROJECT(SimPla  C CXX)
  
SET(CMAKE_VERBOSE_MAKEFILE ON)

SET(BUILD_SHARED_LIBS OFF)

SET(EXECUTABLE_OUTPUT_PATH ${CMAKE_BINARY_DIR}/bin)

SET(LIBRARY_OUTPUT_PATH ${CMAKE_BINARY_DIR}/lib)
 
 

SET(HDF5_PREFER_PARALLEL ON)
SET(HDF5_USE_STATIC_LIBRARIES ON)

FIND_PACKAGE(HDF5 1.8 COMPONENTS C HL)

#ENDIF (DEFINED ENV{HDF5_ROOT})

IF (HDF5_FOUND)
    INCLUDE_DIRECTORIES(${HDF5_INCLUDE_DIRS})
    IF (HDF5_IS_PARALLEL)
        ADD_DEFINITIONS(-DUSE_PARALLEL_IO -DH5_HAVE_PARALLEL)
    ENDIF (HDF5_IS_PARALLEL)
ENDIF (HDF5_FOUND)
 
   


FIND_PACKAGE(CUDA 7.5 REQUIRED)
 
IF (CUDA_FOUND)
    ADD_DEFINITIONS(-DUSE_CUDA) 
ENDIF (CUDA_FOUND)
 
execute_process(COMMAND git describe --all --dirty --long
        OUTPUT_VARIABLE PROJECT_IDENTIFY
        WORKING_DIRECTORY ${PROJECT_SOURCE_DIR}
        OUTPUT_STRIP_TRAILING_WHITESPACE
        )

MESSAGE(STATUS "Identify: ${PROJECT_IDENTIFY}")

ADD_DEFINITIONS(-DIDENTIFY=\"${PROJECT_IDENTIFY}\")

 
 
add_subdirectory(src)
add_subdirectory(example)
<Context>
	<PhysConstants Type="NATURE"></PhysConstants> 

	<Grid Type="Uniform">	
		<Topology Type="CoRectMesh"  
		  			 Dimensions="201 201 1" Ghostwidth="2 2 2" >
		</Topology>
		<Geometry Type="MIN_MAX" Unit="m" >
			<XMin>0 0 0 </XMin>
			<XMax>1 1 1 </XMax>
		</Geometry>
		
		<Time Value="0" dt="0.0025" Unit="s">0.0025</Time>
	</Grid>
	
	<InitLoad>
		<Field Name='B1'  Type='TwoForm'>
			<Value  Format='XML' Dimensions='3'>1 0 0</Value>
		</Field>

		<Field Name='E1'  Type='OneForm'>
<!--				<Value  Format='HDF' >a.h5:/E1</Value> -->
		</Field>

		<Field Name='J1'  Type='OneForm'>
<!--		<Value  Format='HDF' >a.h5:/E1</Value> -->
		</Field>
		<Compound  Type="" Name="H" Z="-1" m="1" T="1.0">
			<Field Name="J"  Type="VecZeroForm"><Value  Format='XML' Dimensions='3'>1 0 0</Value></Field>
			<Field Name="n"  Type="ZeroForm"><Value  Format='XML'> 0</Value></Field>
			<!--<Pool Name='f'  Type='DeltaF'></Pool>--> 
		</Compound>
	</InitLoad>
	

	<Process>
		
		<AssignConstant>
			<DataSet  Type="OneForm" >J1</DataSet>
			<Arguments>
					<value> 0 0 0 </value>
			</Arguments>	
		</AssignConstant>
		<Loop   MaxStep="10"> 		
			 <LuaScript>
				<DataSet  Type="OneForm" >J1</DataSet> 
				<Domain>
					<XMin>0.0 0 0 </XMin>
					<XMax>0.1 1 0 </XMax>
				</Domain>
				<Script >
					 	f0=1.9
					 	k={0,1,1}
					 	alpha=1.0e32
					 	A={1,0,0}
					 	function Fun(x,y,z,t)
					 		wt=t*f0+x*k[1]+y*k[2]+z*k[3]
					 		a=(1-math.exp(-t*alpha))*math.sin(wt)
					 		r={A[1]*a,A[2]*a,A[3]*a}
					 		print(x,y,z,t,r[1])
					 		
					 		return r 
					 	end
					 	
				</Script>	
			</LuaScript>
 
<!--			
			<ColdFluid>
				<DataSet Name="B" IO="RW" Type="TwoForm">B1</DataSet>
				<DataSet Name="E" IO="RW" Type="OneForm">E1</DataSet>
				<DataSet Name="J" IO="R"  Type="OneForm">J1</DataSet>
				<DataSet Name="H" Type="Compound">H</DataSet>

			</ColdFluid>
-->		
			<Maxwell > 
				<DataSet Name="B" IO="RW" Type="TwoForm">B1</DataSet>
				<DataSet Name="E" IO="RW" Type="OneForm">E1</DataSet>
				<DataSet Name="J" IO="R"  Type="OneForm">J1</DataSet>
			</Maxwell>

 
			<PML>
				<DataSet Name="B" IO="RW" Type="TwoForm">B1</DataSet>
				<DataSet Name="E" IO="RW" Type="OneForm">E1</DataSet>
				<DataSet Name="J" IO="R"  Type="OneForm">J1</DataSet>
				<Arguments>
					<bc> 20 20 20 20 20 20 </bc>
				</Arguments>
			</PML>
		
			<WriteXDMF Path="$ENV{Path}" RecordStep="$ENV{RecordStep}">
				<DataSet Name="B" IO="RW" Type="TwoForm">B1</DataSet>
				<DataSet Name="E" IO="RW" Type="OneForm">E1</DataSet>
				<DataSet Name="J" IO="R"  Type="OneForm">J1</DataSet>
			</WriteXDMF >
			<Clock></Clock>
		</Loop>
	</Process>
	
	

</Context>

